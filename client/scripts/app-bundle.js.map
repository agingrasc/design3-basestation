{"version":3,"sources":["app.js","environment.js","main.js","http/base-station-request.js","resources/index.js","services/task.js","services/timer.js","services/vision.js","components/competition/competition.js","components/debug/debug.js","components/go-to-position/go-to-position.js","components/informations/informations.js","components/navbar/navbar.js","components/robot-controller/robot-controller.js","/Users/jeansebastien/Google Drive/ulaval/hiver2017/GLO-3013/projet/design3-basestation/client/src/components/stat/stat.js","components/world-vision/world-vision-competition.js","components/world-vision/world-vision-debug.js"],"names":["App","configureRouter","config","router","title","navStrat","instruction","moduleId","fragment","href","map","route","name","nav","debug","testing","configure","Promise","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","then","setRoot","BaseStationRequest","baseStationUrl","post","data","endpoint","fetch","method","headers","body","JSON","stringify","res","json","console","log","Task","undefined","tasks","ws","WebSocket","onopen","taskRegisterMessage","send","onmessage","evt","parse","splice","length","taskName","task","push","snakeToCamel","stringToBoolean","colorFrom","registerInformations","stringBoolean","status","s","charAt","toUpperCase","replace","m","slice","Timer","begin","time","started","currentLap","setInterval","myTimer","self","d","Date","valueOf","seconds","Math","floor","minutes","hours","stop","clearInterval","reset","Vision","informations","imageView","world_information","origin","ratio","goto","robotPositionRegisterMessage","image","x","width","world","base_table","dimension","height","window","requestAnimationFrame","imagePath","obstacles","worldDimensions","round","parseFloat","unit","robot","position","y","orientation","theta","world_dimension","sent_dimension","checkReadyToStart","registerImageView","registerGotoPosition","registerGoto","Competition","Debug","GoToPosition","vision","httpClient","info","attached","pathfinder","buttonName","execute","xPosition","yPosition","Informations","timer","task_information","resetDetection","mode","response","message","catch","err","colorFor","Navbar","RobotController","currentCommand","currentScaling","currentOrientation","messageReceived","showImage","fakeSegmentation","takePicture","showSegmentsCoordinates","segmentsCoordinates","options","scalings","orientations","sendCommand","taskId","indexOf","toString","scaling","value","isTakePicture","fake_segmentation","segments","coord","coordToString","segmentedImage","thresholdedImage","thresholded_image","onChange","currentTaskIndex","isDrawPicture","startTimer","resetTimer","stopTimer","WorldVisionCompetition","canvasId","x_position","y_position","chosen_x_position","chosen_y_position","canvas","document","getElementById","context","getContext","WorldVisionDebug","monPixel","visionProperties","addEventListener","mousePos","getMousePos","adjustPositions","resetPathRendering","rect","getBoundingClientRect","clientX","left","clientY","top","world_origin_x","world_origin_y","world_image_ratio"],"mappings":"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","file":"app-bundle.js","sourcesContent":["export class App {\n    configureRouter(config, router) {\n        config.title = 'Aurelia';\n        var navStrat = (instruction) => {\n            instruction.config.moduleId = instruction.fragment;\n            instruction.config.href = instruction.fragment;\n        };\n        config.map([{\n            route: ['', 'competition'],\n            name: 'competition',\n            moduleId: './components/competition/competition',\n            nav: true,\n            title: 'Competition'\n        }, {\n            route: 'debug',\n            name: 'debug',\n            moduleId: './components/debug/debug',\n            nav: true,\n            title: 'Debug'\n        }]);\n        this.router = router;\n    }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","export class BaseStationRequest {\n    constructor() {\n        this.baseStationUrl = 'http://localhost:12345';\n    }\n\n    post(data, endpoint) {\n        fetch(this.baseStationUrl + endpoint, {\n                method: 'POST',\n                headers: {\n                    'content-type': 'application/json'\n                },\n                body: JSON.stringify(data)\n            })\n            .then(function(res) {\n                return res.json();\n            })\n            .then(function(data) {\n                console.log(JSON.stringify(data));\n            });\n    }\n}\n","export function configure(config) {\n    //config.globalResources([]);\n}\n","export class Task {\n    constructor() {\n        this.data = undefined;\n        this.tasks = [];\n    }\n\n    start() {\n        let ws = new WebSocket('ws://localhost:3000');\n\n        ws.onopen = () => {\n            let taskRegisterMessage = JSON.stringify({ 'headers': 'register_task_data' });\n            ws.send(taskRegisterMessage);\n        };\n\n        ws.onmessage = (evt) => {\n            let data = JSON.parse(evt.data);\n            this.tasks.splice(0, this.tasks.length);\n\n            for (let taskName in data.data) {\n                let task = data.data[taskName];\n\n                this.tasks.push({\n                    'name': snakeToCamel(taskName),\n                    'done': stringToBoolean(data.data[taskName]),\n                    'color': colorFrom(stringToBoolean(data.data[taskName]))\n                });\n            }\n        };\n    }\n\n    registerInformations(data) {\n        this.tasks = data;\n        this.start();\n    }\n}\n\nfunction stringToBoolean(stringBoolean) {\n    if (stringBoolean === 'True') {\n        return true;\n    } else {\n        return false;\n    }\n}\n\nfunction colorFrom(status) {\n    if (status) {\n        return 'green-text';\n    } else {\n        return 'red-text';\n    }\n}\n\nfunction snakeToCamel(s) {\n    return s.charAt(0).toUpperCase() + s.replace(/(\\_\\w)/g, function(m) { return \" \" + m[1].toUpperCase(); }).slice(1);\n}","export class Timer {\n    constructor() {\n        this.begin = 0;\n        this.time = '00:00';\n        this.started = false;\n    }\n\n    start() {\n        this.currentLap = setInterval(myTimer, 1000);\n        var self = this;\n        var d = new Date();\n        this.begin = d.valueOf();\n\n        function myTimer() {\n            var d = new Date();\n            var time = d.valueOf() - self.begin;\n            var seconds = Math.floor((time / 1000) % 60);\n            var minutes = Math.floor(((time / (1000 * 60)) % 60));\n            var hours = Math.floor(((time / (1000 * 60 * 60)) % 24));\n            self.time = (\"0\" + minutes).slice(-2) + \":\" + (\"0\" + seconds).slice(-2);\n        }\n    }\n\n    stop() {\n        clearInterval(this.currentLap);\n    }\n\n    reset() {\n        this.stop();\n        this.time = '00:00';\n    }\n}\n","export class Vision {\n    constructor() {\n        this.informations = undefined;\n        this.imageView = undefined;\n        this.world_information = undefined;\n        this.origin = undefined;\n        this.ratio = undefined;\n        this.goto = undefined;\n    }\n\n    start() {\n        let ws = new WebSocket('ws://localhost:3000');\n\n        ws.onopen = () => {\n            let robotPositionRegisterMessage = JSON.stringify({'headers': 'register_vision_data'});\n            ws.send(robotPositionRegisterMessage);\n        };\n\n        ws.onmessage = (evt) => {\n            let data = JSON.parse(evt.data);\n\n            if (data.image.origin.x !== \"\") {\n                this.world_information.origin = data.image.origin;\n                this.world_information.ratio = data.image.ratio;\n                this.goto.width = data.world.base_table.dimension.width;\n                this.goto.length = data.world.base_table.dimension.height;\n            }\n\n            window.requestAnimationFrame(() => {\n                this.imageView.imagePath = 'data:image/jpeg;base64,' + data.image.data;\n            });\n\n            this.informations.obstacles = data.world.obstacles;\n\n            let world = data.world;\n\n            this.informations.worldDimensions = {\n                'width': Math.round(parseFloat(world.base_table.dimension.width)),\n                'length': Math.round(parseFloat(world.base_table.dimension.height)),\n                'unit': world.unit\n            };\n\n            // Update robot position\n            let robot = data.world.robot;\n            this.informations.robot = {\n                'position': {\n                    'x': robot.position.x,\n                    'y': robot.position.y\n                },\n                'orientation': robot.orientation\n            };\n\n            this.goto.robot = {\n                'position': {\n                    'x': robot.position.x,\n                    'y': robot.position.y,\n                    'theta': robot.theta\n                }\n            };\n\n            // Update world obstacles\n            this.goto.obstacles = [];\n\n            // Update world dimension\n            this.world_information.world_dimension = data.image.sent_dimension;\n        };\n    }\n\n    checkReadyToStart() {\n        if (this.imageView === undefined) {\n            return;\n        }\n        if (this.informations === undefined) {\n            return;\n        }\n        if (this.goto === undefined) {\n            return;\n        }\n        this.start();\n    }\n    registerImageView(imageView) {\n        this.imageView = imageView;\n        this.checkReadyToStart();\n    }\n\n    registerInformations(informations) {\n        this.informations = informations;\n        this.checkReadyToStart();\n    }\n\n    registerGotoPosition(world_information) {\n        this.world_information = world_information;\n    }\n\n    registerGoto(goto) {\n        console.log(goto);\n        this.goto = goto;\n        this.checkReadyToStart();\n    }\n}\n","export class Competition {}\n","export class Debug {\n}\n","import {\n    inject\n} from 'aurelia-framework';\n\nimport {\n    BaseStationRequest\n} from '../../http/base-station-request';\n\nimport {\n    bindable\n} from 'aurelia-framework';\n\nimport {\n    Vision\n} from '../../services/vision';\n\n@inject(Vision)\nexport class GoToPosition {\n\n    @bindable xPosition = 0;\n    @bindable yPosition = 0;\n    @bindable theta = 0\n    @bindable pathfinder = false;\n\n    constructor(vision) {\n        this.httpClient = new BaseStationRequest();\n        this.vision = vision;\n        this.info = {};\n        this.vision.registerGoto(this.info);\n    }\n\n    attached() {\n        if (!this.pathfinder) {\n            this.buttonName = 'go to pathfinder';\n            this.endpoint = '/go-to-pathfinder';\n        } else {\n            this.buttonName = 'go to position';\n            this.endpoint = '/go-to-position';\n        }\n    }\n\n    execute() {\n        let body = {\n            'destination': {\n                'x': this.xPosition,\n                'y': this.yPosition,\n                'theta': this.theta\n            }\n        };\n\n        console.log(body);\n\n        this.httpClient.post(body, this.endpoint);\n    }\n}\n","import {\n    inject\n}\nfrom 'aurelia-framework';\n\nimport {\n    Vision\n} from '../../services/vision';\n\nimport {\n    Timer\n} from '../../services/timer';\n\nimport {\n    Task\n} from '../../services/task';\n\n@inject(Vision, Timer, Task)\nexport class Informations {\n    constructor(vision, timer, task) {\n        this.timer = timer;\n        this.vision = vision;\n        this.informations = {};\n        this.informations.obstacles = [];\n        this.task = task;\n        this.task_information = [];\n    }\n\n    attached() {\n        this.vision.registerInformations(this.informations);\n        this.task.registerInformations(this.task_information);\n    }\n\n    resetDetection() {\n        fetch('http://0.0.0.0:5000/vision/reset-detection', {\n            method: \"POST\",\n            headers: {\n                'content-type': 'application/json'\n            },\n            mode: 'no-cors'\n        }).then(function(response) {\n            return response.json();\n        }).then(function(message) {\n            console.log(message);\n        }).catch(function(err) {\n            console.log(err);\n        });\n    }\n\n    colorFor(task) {\n        return 'red-text';\n    }\n}\n","export class Navbar {}\n","import {\n    inject\n} from 'aurelia-framework';\n\nimport {\n    Timer\n} from '../../services/timer';\n\n@inject(Timer)\nexport class RobotController {\n  constructor(timer) {\n    this.timer = timer;\n    this.currentCommand = null;\n    this.currentScaling = null;\n    this.currentOrientation = null;\n    this.messageReceived = false;\n    this.showImage = true;\n    this.fakeSegmentation = false;\n    this.takePicture = false;\n    this.showSegmentsCoordinates = false;\n    this.segmentsCoordinates = [];\n\n    this.options = [\n      '0 - Competition',\n      '1 - Initial Orientation',\n      '2 - Identify Antenna',\n      '3 - Receive Information',\n      '4 - Go to Image',\n      '5 - Take Picture',\n      '6 - Go to Drawing Area',\n      '7 - Draw Figure',\n      '8 - Go Out of Drawing Area',\n      '9 - Light Red Led',\n      '10 - Toggle Pencil'\n    ];\n\n    this.scalings = [\n      { 'value': '1', 'name': '4' },\n      { 'value': '0.5', 'name': '2' }\n    ];\n\n    this.orientations = [\n      { 'value': '0', 'name': 'SUD' },\n      { 'value': '180', 'name': 'NORD'},\n      { 'value': '270', 'name': 'EST' },\n      { 'value': '90', 'name': 'WEST'}\n    ];\n  }\n\n  sendCommand() {\n    const taskId = this.options.indexOf(this.currentCommand).toString();\n    const data = {'task_id': taskId };\n\n    if (this.currentScaling) {\n      data.scaling = this.currentScaling.value;\n      data.orientation = this.currentOrientation.value;\n    }\n\n    if (isTakePicture(taskId) && this.fakeSegmentation) {\n      data.fake_segmentation = true;\n    }\n\n    this.messageReceived = false;\n\n    fetch('http://localhost:12345/start-tasks', {\n        method: 'POST',\n        headers: {\n            'content-type': 'application/json'\n        },\n        body: JSON.stringify(data)\n    })\n    .then((res) => res.json())\n    .then((data) => {\n      if (data.message) {\n        this.message = 'command sent to robot';\n        this.messageReceived = true;\n      }\n\n      if (data.image) {\n        this.segmentsCoordinates = data.segments.map((coord) => coordToString(coord));\n        this.segmentedImage = data.image;\n        this.thresholdedImage = data.thresholded_image;\n      }\n    });\n  }\n\n  onChange() {\n    const currentTaskIndex = this.options.indexOf(this.currentCommand);\n    if (isTakePicture(currentTaskIndex)) {\n      this.takePicture = true;\n      this.showImage = true;\n      this.showSegmentsCoordinates = false;\n    } else if (isDrawPicture(currentTaskIndex)) {\n      this.takePicture = false;\n      this.showImage = false;\n      this.showSegmentsCoordinates = true;\n    } else {\n      this.takePicture = false;\n      this.showSegmentsCoordinates = true;\n    }\n  }\n\n  startTimer() {\n    this.timer.start();\n  }\n\n  resetTimer() {\n    this.timer.reset();\n  }\n\n  stopTimer() {\n    this.timer.stop();\n  }\n}\n\n\nfunction isTakePicture(taskId) {\n  return taskId === 5 || taskId === '5';\n}\n\n\nfunction isDrawPicture(taskId) {\n  return taskId === 7 || taskId === '7';\n}\n\nfunction coordToString(coord) {\n  return [\n      Math.round(parseFloat(coord[0])),\n      Math.round(parseFloat(coord[1]))\n  ].toString();\n}\n",null,"export class WorldVisionCompetition {\n\n    constructor() {\n        this.canvasId = \"monCanvas\";\n        this.x_position = 0;\n        this.y_position = 0;\n        this.imagePath = \"./src/components/world-vision/image14.jpg\";\n        this.chosen_x_position = 0;\n        this.chosen_y_position = 0;\n    }\n\n    attached() {\n        var canvas = document.getElementById(this.canvasId);\n        var context = canvas.getContext('2d');\n    }\n\n    start() {\n        console.log(\"Started\");\n    }\n}\n","import {\n    inject\n} from 'aurelia-framework';\n\nimport {\n    Vision\n} from '../../services/vision';\n\n@inject(Vision)\nexport class WorldVisionDebug {\n    constructor(vision) {\n        this.vision = vision;\n        this.monPixel = \"800\"\n\n        this.canvasId = 'monCanvas';\n\n        this.visionProperties = {};\n        this.visionProperties.imagePath = './src/components/world-vision/image14.jpg';\n\n        this.x_position = 0;\n        this.y_position = 0;\n\n        this.chosen_x_position = 0;\n        this.chosen_y_position = 0;\n\n        this.world_information = {};\n        this.theta = 0;\n    }\n\n    attached() {\n        let canvas = document.getElementById(this.canvasId);\n\n        canvas.addEventListener('mousemove', (evt) => {\n            let mousePos = this.getMousePos(canvas, evt);\n            this.adjustPositions(mousePos);\n        }, false);\n\n        canvas.addEventListener('click', (evt) => {\n            this.chosen_x_position = this.x_position;\n            this.chosen_y_position = this.y_position;\n        }, false);\n\n        this.vision.registerImageView(this.visionProperties);\n        this.vision.registerGotoPosition(this.world_information);\n    }\n\n    resetPathRendering() {\n        fetch('http://0.0.0.0:5000/vision/reset-rendering', {\n            method: \"POST\",\n            headers: {\n                'content-type': 'application/json'\n            },\n            mode: 'no-cors'\n        }).then(function (response) {\n            console.log(response);\n        }).catch(function (err) {\n            console.log(err);\n        });\n    }\n\n\n\n    getMousePos(canvas, evt) {\n        let rect = canvas.getBoundingClientRect();\n        return {\n            x: evt.clientX - rect.left,\n            y: evt.clientY - rect.top\n        };\n    }\n\n    adjustPositions(mousePos) {\n        let world_origin_x = parseFloat(this.world_information.origin.x);\n        let world_origin_y = parseFloat(this.world_information.origin.y);\n        let world_image_ratio = parseFloat(this.world_information.ratio);\n\n        this.x_position = Math.floor((mousePos.x - world_origin_x) * world_image_ratio * 10);\n        this.y_position = Math.floor((mousePos.y - world_origin_y) * world_image_ratio * 10);\n    }\n}\n"],"sourceRoot":"../src"}